FROM arm64v8/alpine:latest

RUN echo "http://dl-cdn.alpinelinux.org/alpine/edge/main" >> /etc/apk/repositories && \
    echo "http://dl-cdn.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories && \
    echo "http://dl-cdn.alpinelinux.org/alpine/edge/testing" >> /etc/apk/repositories

RUN apk update && \
          apk add --no-cache build-base wget pcre-dev pcre-static openssl-dev openssl-libs-static \
          libcurl libcurl-static zlib-dev zlib-static libevent-dev libevent-static

WORKDIR /build

RUN wget https://cdn.zabbix.com/zabbix/sources/stable/6.0/zabbix-6.0.0.tar.gz && \
    tar -xzf zabbix-6.0.0.tar.gz && \
    cd zabbix-6.0.0 && \
    ./configure --enable-agent --enable-static && \
    make LDFLAGS="-static"