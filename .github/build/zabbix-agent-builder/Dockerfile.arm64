FROM arm64v8/debian:bullseye-slim

# Устанавливаем необходимые пакеты
RUN apt-get update && apt-get install -y build-essential wget libssl-dev libpcre3-dev zlib1g-dev && \
    apt-get clean

WORKDIR /build

# Скачиваем и собираем Zabbix Agent
RUN wget https://cdn.zabbix.com/zabbix/sources/stable/6.0/zabbix-6.0.0.tar.gz && \
    tar -xzf zabbix-6.0.0.tar.gz && \
    cd zabbix-6.0.0 && \
    ./configure --enable-agent --enable-static && \
    make LDFLAGS="-static"