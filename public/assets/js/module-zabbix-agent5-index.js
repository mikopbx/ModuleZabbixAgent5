"use strict";

/* global globalRootUrl, globalTranslate, Form, ace */
var ModuleZabbixAgent5 = {
  $formObj: $('#module-zabbix-agent5-form'),
  $disabilityFields: $('#module-zabbix-agent5-form  .disability'),
  $statusToggle: $('#module-status-toggle'),
  $moduleStatus: $('#status'),
  // Ace editor instance
  editor: '',
  // Form validation rules
  validateRules: {},

  /**
   * On page load we init some Semantic UI library
   */
  initialize: function initialize() {
    ModuleZabbixAgent5.checkStatusToggle();
    window.addEventListener('ModuleStatusChanged', ModuleZabbixAgent5.checkStatusToggle);
    ModuleZabbixAgent5.initializeForm();
    ModuleZabbixAgent5.initializeAce();
  },

  /**
   * Checks the status toggle and updates the disability fields.
   */
  checkStatusToggle: function checkStatusToggle() {
    if (ModuleZabbixAgent5.$statusToggle.checkbox('is checked')) {
      ModuleZabbixAgent5.$disabilityFields.removeClass('disabled');
    } else {
      ModuleZabbixAgent5.$disabilityFields.addClass('disabled');
    }
  },

  /**
   * Initializes the Ace editor instance.
   * Sets up Ace editor with a monokai theme and custom options.
   * Attaches change handler to the editor session.
   */
  initializeAce: function initializeAce() {
    var configFileText = ModuleZabbixAgent5.$formObj.form('get value', 'configContent');
    var aceHeight = window.innerHeight - 380;
    var rowsCount = Math.round(aceHeight / 16.3);
    $(window).load(function () {
      $('.application-code').css('min-height', "".concat(aceHeight, "px"));
    });
    ModuleZabbixAgent5.editor = ace.edit('user-edit-config');
    ModuleZabbixAgent5.editor.getSession().setValue(configFileText);

    var NewMode = ace.require('ace/mode/julia').Mode;

    ModuleZabbixAgent5.editor.session.setMode(new NewMode());
    ModuleZabbixAgent5.editor.setTheme('ace/theme/monokai');
    ModuleZabbixAgent5.editor.resize();
    ModuleZabbixAgent5.editor.getSession().on('change', function () {
      // Trigger change event to acknowledge the modification
      Form.dataChanged();
    });
    ModuleZabbixAgent5.editor.setOptions({
      maxLines: rowsCount,
      showPrintMargin: false,
      showLineNumbers: false
    });
  },

  /**
   * Callback function to be called before the form is sent
   * @param {Object} settings - The current settings of the form
   * @returns {Object} - The updated settings of the form
   */
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = ModuleZabbixAgent5.$formObj.form('get values');
    result.data.configContent = ModuleZabbixAgent5.editor.getValue();
    return result;
  },

  /**
   * Some actions after forms send
   */
  cbAfterSendForm: function cbAfterSendForm() {},

  /**
   * Initialize form parameters
   */
  initializeForm: function initializeForm() {
    Form.$formObj = ModuleZabbixAgent5.$formObj;
    Form.url = "".concat(globalRootUrl, "module-zabbix-agent5/save");
    Form.validateRules = ModuleZabbixAgent5.validateRules;
    Form.cbBeforeSendForm = ModuleZabbixAgent5.cbBeforeSendForm;
    Form.cbAfterSendForm = ModuleZabbixAgent5.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  ModuleZabbixAgent5.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUtemFiYml4LWFnZW50NS1pbmRleC5qcyJdLCJuYW1lcyI6WyJNb2R1bGVaYWJiaXhBZ2VudDUiLCIkZm9ybU9iaiIsIiQiLCIkZGlzYWJpbGl0eUZpZWxkcyIsIiRzdGF0dXNUb2dnbGUiLCIkbW9kdWxlU3RhdHVzIiwiZWRpdG9yIiwidmFsaWRhdGVSdWxlcyIsImluaXRpYWxpemUiLCJjaGVja1N0YXR1c1RvZ2dsZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplRm9ybSIsImluaXRpYWxpemVBY2UiLCJjaGVja2JveCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjb25maWdGaWxlVGV4dCIsImZvcm0iLCJhY2VIZWlnaHQiLCJpbm5lckhlaWdodCIsInJvd3NDb3VudCIsIk1hdGgiLCJyb3VuZCIsImxvYWQiLCJjc3MiLCJhY2UiLCJlZGl0IiwiZ2V0U2Vzc2lvbiIsInNldFZhbHVlIiwiTmV3TW9kZSIsInJlcXVpcmUiLCJNb2RlIiwic2Vzc2lvbiIsInNldE1vZGUiLCJzZXRUaGVtZSIsInJlc2l6ZSIsIm9uIiwiRm9ybSIsImRhdGFDaGFuZ2VkIiwic2V0T3B0aW9ucyIsIm1heExpbmVzIiwic2hvd1ByaW50TWFyZ2luIiwic2hvd0xpbmVOdW1iZXJzIiwiY2JCZWZvcmVTZW5kRm9ybSIsInNldHRpbmdzIiwicmVzdWx0IiwiZGF0YSIsImNvbmZpZ0NvbnRlbnQiLCJnZXRWYWx1ZSIsImNiQWZ0ZXJTZW5kRm9ybSIsInVybCIsImdsb2JhbFJvb3RVcmwiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUEsSUFBTUEsa0JBQWtCLEdBQUc7QUFDMUJDLEVBQUFBLFFBQVEsRUFBRUMsQ0FBQyxDQUFDLDRCQUFELENBRGU7QUFFMUJDLEVBQUFBLGlCQUFpQixFQUFFRCxDQUFDLENBQUMseUNBQUQsQ0FGTTtBQUcxQkUsRUFBQUEsYUFBYSxFQUFFRixDQUFDLENBQUMsdUJBQUQs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QkFBa0IsQ0FBQ0MsUUFBbkIsQ0FBNEJpQixJQUE1QixDQUFpQyxZQUFqQyxDQUFkO0FBQ0E0QixJQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FBWUMsYUFBWixHQUE0QmhELGtCQUFrQixDQUFDTSxNQUFuQixDQUEwQjJDLFFBQTFCLEVBQTVCO0FBQ0EsV0FBT0gsTUFBUDtBQUNBLEdBckV5Qjs7QUFzRTFCO0FBQ0Q7QUFDQTtBQUNDSSxFQUFBQSxlQXpFMEIsNkJBeUVSLENBRWpCLENBM0V5Qjs7QUE0RTFCO0FBQ0Q7QUFDQTtBQUNDdEMsRUFBQUEsY0EvRTBCLDRCQStFVDtBQUNoQjBCLElBQUFBLElBQUksQ0FBQ3JDLFFBQUwsR0FBZ0JELGtCQUFrQixDQUFDQyxRQUFuQztBQUNBcUMsSUFBQUEsSUFBSSxDQUFDYSxHQUFMLGFBQWNDLGFBQWQ7QUFDQWQsSUFBQUEsSUFBSSxDQUFDL0IsYUFBTCxHQUFxQlAsa0JBQWtCLENBQUNPLGFBQXhDO0FBQ0ErQixJQUFBQSxJQUFJLENBQUNNLGdCQUFMLEdBQXdCNUMsa0JBQWtCLENBQUM0QyxnQkFBM0M7QUFDQU4sSUFBQUEsSUFBSSxDQUFDWSxlQUFMLEdBQXVCbEQsa0JBQWtCLENBQUNrRCxlQUExQztBQUNBWixJQUFBQSxJQUFJLENBQUM5QixVQUFMO0FBQ0E7QUF0RnlCLENBQTNCO0FBeUZBTixDQUFDLENBQUNtRCxRQUFELENBQUQsQ0FBWUMsS0FBWixDQUFrQixZQUFNO0FBQ3ZCdEQsRUFBQUEsa0JBQWtCLENBQUNRLFVBQW5CO0FBQ0EsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBnbG9iYWxSb290VXJsLCBnbG9iYWxUcmFuc2xhdGUsIEZvcm0sIGFjZSAqL1xuXG5jb25zdCBNb2R1bGVaYWJiaXhBZ2VudDUgPSB7XG5cdCRmb3JtT2JqOiAkKCcjbW9kdWxlLXphYmJpeC1hZ2VudDUtZm9ybScpLFxuXHQkZGlzYWJpbGl0eUZpZWxkczogJCgnI21vZHVsZS16YWJiaXgtYWdlbnQ1LWZvcm0gIC5kaXNhYmlsaXR5JyksXG5cdCRzdGF0dXNUb2dnbGU6ICQoJyNtb2R1bGUtc3RhdHVzLXRvZ2dsZScpLFxuXHQkbW9kdWxlU3RhdHVzOiAkKCcjc3RhdHVzJyksXG5cdC8vIEFjZSBlZGl0b3IgaW5zdGFuY2Vcblx0ZWRpdG9yOiAnJyxcblx0Ly8gRm9ybSB2YWxpZGF0aW9uIHJ1bGVzXG5cdHZhbGlkYXRlUnVsZXM6IHt9LFxuXHQvKipcblx0ICogT24gcGFnZSBsb2FkIHdlIGluaXQgc29tZSBTZW1hbnRpYyBVSSBsaWJyYXJ5XG5cdCAqL1xuXHRpbml0aWFsaXplKCkge1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5jaGVja1N0YXR1c1RvZ2dsZSgpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdNb2R1bGVTdGF0dXNDaGFuZ2VkJywgTW9kdWxlWmFiYml4QWdlbnQ1LmNoZWNrU3RhdHVzVG9nZ2xlKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuaW5pdGlhbGl6ZUZvcm0oKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuaW5pdGlhbGl6ZUFjZSgpO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDaGVja3MgdGhlIHN0YXR1cyB0b2dnbGUgYW5kIHVwZGF0ZXMgdGhlIGRpc2FiaWxpdHkgZmllbGRzLlxuXHQgKi9cblx0Y2hlY2tTdGF0dXNUb2dnbGUoKSB7XG5cdFx0aWYgKE1vZHVsZVphYmJpeEFnZW50NS4kc3RhdHVzVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJykpIHtcblx0XHRcdE1vZHVsZVphYmJpeEFnZW50NS4kZGlzYWJpbGl0eUZpZWxkcy5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0TW9kdWxlWmFiYml4QWdlbnQ1LiRkaXNhYmlsaXR5RmllbGRzLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fSxcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIEFjZSBlZGl0b3IgaW5zdGFuY2UuXG5cdCAqIFNldHMgdXAgQWNlIGVkaXRvciB3aXRoIGEgbW9ub2thaSB0aGVtZSBhbmQgY3VzdG9tIG9wdGlvbnMuXG5cdCAqIEF0dGFjaGVzIGNoYW5nZSBoYW5kbGVyIHRvIHRoZSBlZGl0b3Igc2Vzc2lvbi5cblx0ICovXG5cdGluaXRpYWxpemVBY2UoKSB7XG5cdFx0Y29uc3QgY29uZmlnRmlsZVRleHQgPSBNb2R1bGVaYWJiaXhBZ2VudDUuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ2NvbmZpZ0NvbnRlbnQnKTtcblx0XHRjb25zdCBhY2VIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAzODA7XG5cdFx0Y29uc3Qgcm93c0NvdW50ID0gTWF0aC5yb3VuZChhY2VIZWlnaHQgLyAxNi4zKTtcblx0XHQkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcuYXBwbGljYXRpb24tY29kZScpLmNzcygnbWluLWhlaWdodCcsIGAke2FjZUhlaWdodH1weGApO1xuXHRcdH0pO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IgPSBhY2UuZWRpdCgndXNlci1lZGl0LWNvbmZpZycpO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFZhbHVlKGNvbmZpZ0ZpbGVUZXh0KTtcblx0XHRsZXQgTmV3TW9kZSA9IGFjZS5yZXF1aXJlKCdhY2UvbW9kZS9qdWxpYScpLk1vZGU7XG5cdFx0TW9kdWxlWmFiYml4QWdlbnQ1LmVkaXRvci5zZXNzaW9uLnNldE1vZGUobmV3IE5ld01vZGUoKSk7XG5cdFx0TW9kdWxlWmFiYml4QWdlbnQ1LmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuZWRpdG9yLnJlc2l6ZSgpO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0U2Vzc2lvbigpLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHQvLyBUcmlnZ2VyIGNoYW5nZSBldmVudCB0byBhY2tub3dsZWRnZSB0aGUgbW9kaWZpY2F0aW9uXG5cdFx0XHRGb3JtLmRhdGFDaGFuZ2VkKCk7XG5cdFx0fSk7XG5cblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuZWRpdG9yLnNldE9wdGlvbnMoe1xuXHRcdFx0bWF4TGluZXM6IHJvd3NDb3VudCxcblx0XHRcdHNob3dQcmludE1hcmdpbjogZmFsc2UsXG5cdFx0XHRzaG93TGluZU51bWJlcnM6IGZhbHNlLFxuXHRcdH0pO1xuXHR9LFxuXHQvKipcblx0ICogQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGJlZm9yZSB0aGUgZm9ybSBpcyBzZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5ncyAtIFRoZSBjdXJyZW50IHNldHRpbmdzIG9mIHRoZSBmb3JtXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IC0gVGhlIHVwZGF0ZWQgc2V0dGluZ3Mgb2YgdGhlIGZvcm1cblx0ICovXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHRyZXN1bHQuZGF0YSA9IE1vZHVsZVphYmJpeEFnZW50NS4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0cmVzdWx0LmRhdGEuY29uZmlnQ29udGVudCA9IE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXHQvKipcblx0ICogU29tZSBhY3Rpb25zIGFmdGVyIGZvcm1zIHNlbmRcblx0ICovXG5cdGNiQWZ0ZXJTZW5kRm9ybSgpIHtcblxuXHR9LFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSBmb3JtIHBhcmFtZXRlcnNcblx0ICovXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBNb2R1bGVaYWJiaXhBZ2VudDUuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW1vZHVsZS16YWJiaXgtYWdlbnQ1L3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IE1vZHVsZVphYmJpeEFnZW50NS52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uY2JCZWZvcmVTZW5kRm9ybSA9IE1vZHVsZVphYmJpeEFnZW50NS5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gTW9kdWxlWmFiYml4QWdlbnQ1LmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0TW9kdWxlWmFiYml4QWdlbnQ1LmluaXRpYWxpemUoKTtcbn0pO1xuXG4iXX0=