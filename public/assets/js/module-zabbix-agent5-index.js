"use strict";

/* global globalRootUrl, globalTranslate, Form, ace */
var ModuleZabbixAgent5 = {
  $formObj: $('#module-zabbix-agent5-form'),
  $disabilityFields: $('#module-zabbix-agent5-form  .disability'),
  $statusToggle: $('#module-status-toggle'),
  $moduleStatus: $('#status'),
  // Ace editor instance
  editor: '',

  /**
   * On page load we init some Semantic UI library
   */
  initialize: function initialize() {
    ModuleZabbixAgent5.checkStatusToggle();
    window.addEventListener('ModuleStatusChanged', ModuleZabbixAgent5.checkStatusToggle);
    ModuleZabbixAgent5.initializeForm();
    ModuleZabbixAgent5.initializeAce();
  },

  /**
   * Checks the status toggle and updates the disability fields.
   */
  checkStatusToggle: function checkStatusToggle() {
    if (ModuleZabbixAgent5.$statusToggle.checkbox('is checked')) {
      ModuleZabbixAgent5.$disabilityFields.removeClass('disabled');
    } else {
      ModuleZabbixAgent5.$disabilityFields.addClass('disabled');
    }
  },

  /**
   * Initializes the Ace editor instance.
   * Sets up Ace editor with a monokai theme and custom options.
   * Attaches change handler to the editor session.
   */
  initializeAce: function initializeAce() {
    var configFileText = ModuleZabbixAgent5.$formObj.form('get value', 'configContent');
    var aceHeight = window.innerHeight - 380;
    var rowsCount = Math.round(aceHeight / 16.3);
    $(window).load(function () {
      $('.application-code').css('min-height', "".concat(aceHeight, "px"));
    });
    ModuleZabbixAgent5.editor = ace.edit('user-edit-config');
    ModuleZabbixAgent5.editor.getSession().setValue(configFileText);

    var NewMode = ace.require('ace/mode/julia').Mode;

    ModuleZabbixAgent5.editor.session.setMode(new NewMode());
    ModuleZabbixAgent5.editor.setTheme('ace/theme/monokai');
    ModuleZabbixAgent5.editor.resize();
    ModuleZabbixAgent5.editor.getSession().on('change', function () {
      // Trigger change event to acknowledge the modification
      Form.dataChanged();
    });
    ModuleZabbixAgent5.editor.setOptions({
      maxLines: rowsCount,
      showPrintMargin: false,
      showLineNumbers: false
    });
  },

  /**
   * Callback function to be called before the form is sent
   * @param {Object} settings - The current settings of the form
   * @returns {Object} - The updated settings of the form
   */
  cbBeforeSendForm: function cbBeforeSendForm(settings) {
    var result = settings;
    result.data = ModuleZabbixAgent5.$formObj.form('get values');
    result.data.configContent = ModuleZabbixAgent5.editor.getValue();
    return result;
  },

  /**
   * Some actions after forms send
   */
  cbAfterSendForm: function cbAfterSendForm() {},

  /**
   * Initialize form parameters
   */
  initializeForm: function initializeForm() {
    Form.$formObj = ModuleZabbixAgent5.$formObj;
    Form.url = "".concat(globalRootUrl, "module-zabbix-agent5/save");
    Form.validateRules = ModuleZabbixAgent5.validateRules;
    Form.cbBeforeSendForm = ModuleZabbixAgent5.cbBeforeSendForm;
    Form.cbAfterSendForm = ModuleZabbixAgent5.cbAfterSendForm;
    Form.initialize();
  }
};
$(document).ready(function () {
  ModuleZabbixAgent5.initialize();
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUtemFiYml4LWFnZW50NS1pbmRleC5qcyJdLCJuYW1lcyI6WyJNb2R1bGVaYWJiaXhBZ2VudDUiLCIkZm9ybU9iaiIsIiQiLCIkZGlzYWJpbGl0eUZpZWxkcyIsIiRzdGF0dXNUb2dnbGUiLCIkbW9kdWxlU3RhdHVzIiwiZWRpdG9yIiwiaW5pdGlhbGl6ZSIsImNoZWNrU3RhdHVzVG9nZ2xlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImluaXRpYWxpemVGb3JtIiwiaW5pdGlhbGl6ZUFjZSIsImNoZWNrYm94IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNvbmZpZ0ZpbGVUZXh0IiwiZm9ybSIsImFjZUhlaWdodCIsImlubmVySGVpZ2h0Iiwicm93c0NvdW50IiwiTWF0aCIsInJvdW5kIiwibG9hZCIsImNzcyIsImFjZSIsImVkaXQiLCJnZXRTZXNzaW9uIiwic2V0VmFsdWUiLCJOZXdNb2RlIiwicmVxdWlyZSIsIk1vZGUiLCJzZXNzaW9uIiwic2V0TW9kZSIsInNldFRoZW1lIiwicmVzaXplIiwib24iLCJGb3JtIiwiZGF0YUNoYW5nZWQiLCJzZXRPcHRpb25zIiwibWF4TGluZXMiLCJzaG93UHJpbnRNYXJnaW4iLCJzaG93TGluZU51bWJlcnMiLCJjYkJlZm9yZVNlbmRGb3JtIiwic2V0dGluZ3MiLCJyZXN1bHQiLCJkYXRhIiwiY29uZmlnQ29udGVudCIsImdldFZhbHVlIiwiY2JBZnRlclNlbmRGb3JtIiwidXJsIiwiZ2xvYmFsUm9vdFVybCIsInZhbGlkYXRlUnVsZXMiLCJkb2N1bWVudCIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUEsSUFBTUEsa0JBQWtCLEdBQUc7QUFDMUJDLEVBQUFBLFFBQVEsRUFBRUMsQ0FBQyxDQUFDLDRCQUFELENBRGU7QUFFMUJDLEVBQUFBLGlCQUFpQixFQUFFRCxDQUFDLENBQUMseUNBQUQsQ0FGTTtBQUcxQkUsRUFBQUEsYUFBYSxFQUFFRixDQUFDLENBQUMsdUJBQUQs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QWlDLFlBQWpDLENBQWQ7QUFDQTRCLElBQUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZQyxhQUFaLEdBQTRCL0Msa0JBQWtCLENBQUNNLE1BQW5CLENBQTBCMEMsUUFBMUIsRUFBNUI7QUFDQSxXQUFPSCxNQUFQO0FBQ0EsR0FuRXlCOztBQW9FMUI7QUFDRDtBQUNBO0FBQ0NJLEVBQUFBLGVBdkUwQiw2QkF1RVIsQ0FFakIsQ0F6RXlCOztBQTBFMUI7QUFDRDtBQUNBO0FBQ0N0QyxFQUFBQSxjQTdFMEIsNEJBNkVUO0FBQ2hCMEIsSUFBQUEsSUFBSSxDQUFDcEMsUUFBTCxHQUFnQkQsa0JBQWtCLENBQUNDLFFBQW5DO0FBQ0FvQyxJQUFBQSxJQUFJLENBQUNhLEdBQUwsYUFBY0MsYUFBZDtBQUNBZCxJQUFBQSxJQUFJLENBQUNlLGFBQUwsR0FBcUJwRCxrQkFBa0IsQ0FBQ29ELGFBQXhDO0FBQ0FmLElBQUFBLElBQUksQ0FBQ00sZ0JBQUwsR0FBd0IzQyxrQkFBa0IsQ0FBQzJDLGdCQUEzQztBQUNBTixJQUFBQSxJQUFJLENBQUNZLGVBQUwsR0FBdUJqRCxrQkFBa0IsQ0FBQ2lELGVBQTFDO0FBQ0FaLElBQUFBLElBQUksQ0FBQzlCLFVBQUw7QUFDQTtBQXBGeUIsQ0FBM0I7QUF1RkFMLENBQUMsQ0FBQ21ELFFBQUQsQ0FBRCxDQUFZQyxLQUFaLENBQWtCLFlBQU07QUFDdkJ0RCxFQUFBQSxrQkFBa0IsQ0FBQ08sVUFBbkI7QUFDQSxDQUZEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGdsb2JhbFJvb3RVcmwsIGdsb2JhbFRyYW5zbGF0ZSwgRm9ybSwgYWNlICovXG5cbmNvbnN0IE1vZHVsZVphYmJpeEFnZW50NSA9IHtcblx0JGZvcm1PYmo6ICQoJyNtb2R1bGUtemFiYml4LWFnZW50NS1mb3JtJyksXG5cdCRkaXNhYmlsaXR5RmllbGRzOiAkKCcjbW9kdWxlLXphYmJpeC1hZ2VudDUtZm9ybSAgLmRpc2FiaWxpdHknKSxcblx0JHN0YXR1c1RvZ2dsZTogJCgnI21vZHVsZS1zdGF0dXMtdG9nZ2xlJyksXG5cdCRtb2R1bGVTdGF0dXM6ICQoJyNzdGF0dXMnKSxcblx0Ly8gQWNlIGVkaXRvciBpbnN0YW5jZVxuXHRlZGl0b3I6ICcnLFxuXHQvKipcblx0ICogT24gcGFnZSBsb2FkIHdlIGluaXQgc29tZSBTZW1hbnRpYyBVSSBsaWJyYXJ5XG5cdCAqL1xuXHRpbml0aWFsaXplKCkge1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5jaGVja1N0YXR1c1RvZ2dsZSgpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdNb2R1bGVTdGF0dXNDaGFuZ2VkJywgTW9kdWxlWmFiYml4QWdlbnQ1LmNoZWNrU3RhdHVzVG9nZ2xlKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuaW5pdGlhbGl6ZUZvcm0oKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuaW5pdGlhbGl6ZUFjZSgpO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDaGVja3MgdGhlIHN0YXR1cyB0b2dnbGUgYW5kIHVwZGF0ZXMgdGhlIGRpc2FiaWxpdHkgZmllbGRzLlxuXHQgKi9cblx0Y2hlY2tTdGF0dXNUb2dnbGUoKSB7XG5cdFx0aWYgKE1vZHVsZVphYmJpeEFnZW50NS4kc3RhdHVzVG9nZ2xlLmNoZWNrYm94KCdpcyBjaGVja2VkJykpIHtcblx0XHRcdE1vZHVsZVphYmJpeEFnZW50NS4kZGlzYWJpbGl0eUZpZWxkcy5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0TW9kdWxlWmFiYml4QWdlbnQ1LiRkaXNhYmlsaXR5RmllbGRzLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuXHRcdH1cblx0fSxcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIEFjZSBlZGl0b3IgaW5zdGFuY2UuXG5cdCAqIFNldHMgdXAgQWNlIGVkaXRvciB3aXRoIGEgbW9ub2thaSB0aGVtZSBhbmQgY3VzdG9tIG9wdGlvbnMuXG5cdCAqIEF0dGFjaGVzIGNoYW5nZSBoYW5kbGVyIHRvIHRoZSBlZGl0b3Igc2Vzc2lvbi5cblx0ICovXG5cdGluaXRpYWxpemVBY2UoKSB7XG5cdFx0Y29uc3QgY29uZmlnRmlsZVRleHQgPSBNb2R1bGVaYWJiaXhBZ2VudDUuJGZvcm1PYmouZm9ybSgnZ2V0IHZhbHVlJywgJ2NvbmZpZ0NvbnRlbnQnKTtcblx0XHRjb25zdCBhY2VIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSAzODA7XG5cdFx0Y29uc3Qgcm93c0NvdW50ID0gTWF0aC5yb3VuZChhY2VIZWlnaHQgLyAxNi4zKTtcblx0XHQkKHdpbmRvdykubG9hZChmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcuYXBwbGljYXRpb24tY29kZScpLmNzcygnbWluLWhlaWdodCcsIGAke2FjZUhlaWdodH1weGApO1xuXHRcdH0pO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IgPSBhY2UuZWRpdCgndXNlci1lZGl0LWNvbmZpZycpO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFZhbHVlKGNvbmZpZ0ZpbGVUZXh0KTtcblx0XHRsZXQgTmV3TW9kZSA9IGFjZS5yZXF1aXJlKCdhY2UvbW9kZS9qdWxpYScpLk1vZGU7XG5cdFx0TW9kdWxlWmFiYml4QWdlbnQ1LmVkaXRvci5zZXNzaW9uLnNldE1vZGUobmV3IE5ld01vZGUoKSk7XG5cdFx0TW9kdWxlWmFiYml4QWdlbnQ1LmVkaXRvci5zZXRUaGVtZSgnYWNlL3RoZW1lL21vbm9rYWknKTtcblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuZWRpdG9yLnJlc2l6ZSgpO1xuXHRcdE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0U2Vzc2lvbigpLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHQvLyBUcmlnZ2VyIGNoYW5nZSBldmVudCB0byBhY2tub3dsZWRnZSB0aGUgbW9kaWZpY2F0aW9uXG5cdFx0XHRGb3JtLmRhdGFDaGFuZ2VkKCk7XG5cdFx0fSk7XG5cblx0XHRNb2R1bGVaYWJiaXhBZ2VudDUuZWRpdG9yLnNldE9wdGlvbnMoe1xuXHRcdFx0bWF4TGluZXM6IHJvd3NDb3VudCxcblx0XHRcdHNob3dQcmludE1hcmdpbjogZmFsc2UsXG5cdFx0XHRzaG93TGluZU51bWJlcnM6IGZhbHNlLFxuXHRcdH0pO1xuXHR9LFxuXHQvKipcblx0ICogQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGJlZm9yZSB0aGUgZm9ybSBpcyBzZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5ncyAtIFRoZSBjdXJyZW50IHNldHRpbmdzIG9mIHRoZSBmb3JtXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IC0gVGhlIHVwZGF0ZWQgc2V0dGluZ3Mgb2YgdGhlIGZvcm1cblx0ICovXG5cdGNiQmVmb3JlU2VuZEZvcm0oc2V0dGluZ3MpIHtcblx0XHRjb25zdCByZXN1bHQgPSBzZXR0aW5ncztcblx0XHRyZXN1bHQuZGF0YSA9IE1vZHVsZVphYmJpeEFnZW50NS4kZm9ybU9iai5mb3JtKCdnZXQgdmFsdWVzJyk7XG5cdFx0cmVzdWx0LmRhdGEuY29uZmlnQ29udGVudCA9IE1vZHVsZVphYmJpeEFnZW50NS5lZGl0b3IuZ2V0VmFsdWUoKTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXHQvKipcblx0ICogU29tZSBhY3Rpb25zIGFmdGVyIGZvcm1zIHNlbmRcblx0ICovXG5cdGNiQWZ0ZXJTZW5kRm9ybSgpIHtcblxuXHR9LFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSBmb3JtIHBhcmFtZXRlcnNcblx0ICovXG5cdGluaXRpYWxpemVGb3JtKCkge1xuXHRcdEZvcm0uJGZvcm1PYmogPSBNb2R1bGVaYWJiaXhBZ2VudDUuJGZvcm1PYmo7XG5cdFx0Rm9ybS51cmwgPSBgJHtnbG9iYWxSb290VXJsfW1vZHVsZS16YWJiaXgtYWdlbnQ1L3NhdmVgO1xuXHRcdEZvcm0udmFsaWRhdGVSdWxlcyA9IE1vZHVsZVphYmJpeEFnZW50NS52YWxpZGF0ZVJ1bGVzO1xuXHRcdEZvcm0uY2JCZWZvcmVTZW5kRm9ybSA9IE1vZHVsZVphYmJpeEFnZW50NS5jYkJlZm9yZVNlbmRGb3JtO1xuXHRcdEZvcm0uY2JBZnRlclNlbmRGb3JtID0gTW9kdWxlWmFiYml4QWdlbnQ1LmNiQWZ0ZXJTZW5kRm9ybTtcblx0XHRGb3JtLmluaXRpYWxpemUoKTtcblx0fSxcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcblx0TW9kdWxlWmFiYml4QWdlbnQ1LmluaXRpYWxpemUoKTtcbn0pO1xuXG4iXX0=